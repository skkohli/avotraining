<link rel="import" href="../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../../bower_components/paper-input/paper-input.html">
<link rel="import" href="../../bower_components/iron-icons/iron-icons.html">
<link rel="import" href="../../bower_components/iron-icon/iron-icon.html">
<dom-module id="select-container">
  <template>
    <style>
     :host {
          display: none;
        }

        :host([active]) {
          display: block;
        }

        p {
          line-height: 33.18px;
          white-space: pre-wrap;
        }
        #search{
          width : 10em;
        }
    </style>
    <paper-input id = "search" value="{{searchString::input}}" placeholder = "Search controls">
    <iron-icon prefix icon = "icons:search"></iron-icon>
    <paper-icon-button suffix on-click = "clearSearchInput" icon = "clear" alt = "clear" title = "clear"></paper-icon-button>
    </paper-input>
    <template is="dom-repeat" items="{{controlsOb.controlsList}}" as="control" filter="{{computeFilter(searchString)}}">
      <div>{{control.label}}</div>
    </template>
  </template>
  <script>
    Polymer({
      is: 'select-container',
       properties: {
        active: {
          type: Boolean,
          value: false,
          reflectToAttribute: true
        },
        controlsOb:{
          type:Object,
        }
      },
      ready:function(){
      },
      clearSearchInput:function(){
        console.log(this.controlsOb);
        this.push('controlsOb.controlsList',{label:"hohoa"});        
        this.$.search.value = null;
      },
     computeFilter: function(string) {
        if (!string) {
          // set filter to null to disable filtering
          return null;
        } else {
          // return a filter function for the current search string
          string = string.toLowerCase();
          return function(control) {
            var label = control.label.toLowerCase();
            return (label.indexOf(string) != -1);
          };
        }
      },
    });
    
  </script>

</dom-module>
